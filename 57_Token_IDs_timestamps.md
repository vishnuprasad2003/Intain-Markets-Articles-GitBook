# Token IDs, Timestamps

## Overview

FT tokens created for funding notices have unique identifiers and timestamps that enable complete tracking and auditability. Understanding token IDs and timestamps helps you track token creation, distribution, and transfers.

## Token IDs

### What Are Token IDs?

**Token IDs:**
- Unique identifiers for each token: Generated by blockchain smart contract during `createFTTokensForBorrower()` function call
- Blockchain-based identification: Token contract address and token IDs stored in `cf_funding_notices` collection
- Immutable record: Blockchain transaction hash stored in `approvalTransactionHash` field
- Enables tracking: Token IDs link to blockchain records for complete audit trail
- Links to blockchain: `ftContractAddress` field stores smart contract address, transaction hashes stored for all blockchain operations
- Database fields: `ftContractAddress` (smart contract address), `approvalTransactionHash` (borrower approval transaction), token IDs stored in `tokenDistribution` array

**Purpose:**
- Identify specific tokens
- Track token ownership
- Enable transfers
- Maintain audit trail
- Blockchain verification

---

### Where Token IDs Appear

**Visible in:**
- Funding notice details
- Token distribution information
- Blockchain records
- Transaction history
- Audit trails

**Format:**
- Unique alphanumeric identifier
- Blockchain transaction hash
- Token contract address
- Other blockchain identifiers

---

## Timestamps

### What Are Timestamps?

**Timestamps:**
- Record of when events occurred
- Precise time recording
- UTC time format
- Complete chronology
- Audit trail component

**Purpose:**
- Track when things happened
- Establish timeline
- Audit purposes
- Compliance requirements
- Process understanding

---

### What Gets Timestamped

**Token-related events:**
- Token creation time: `createdAt` timestamp in `cf_funding_notices` collection (when funding notice created), blockchain transaction timestamp from `createFTTokensForBorrower()` call
- Token distribution time: Timestamp when `updateTokenDistribution` API called (stored in `statusHistory` entry with status `'TOKEN_GENERATED'`)
- Token transfer time: `approvedAt` timestamp when borrower approves token transfer (via `POST /cf/funding-notices/:fundingNoticeId/approve-token-transfer`), `approvalTransactionHash` contains blockchain transaction timestamp
- Borrower approval time: `approvedAt` field in `cf_funding_notices` collection, `issuedAt` field (both set to `DateUtils.nowUTC()`)
- Lender receipt time: Individual lender timestamps in `tokenDistribution` array (if tracked), `confirmedAt` timestamp when lender confirms fund transfer (via `POST /cf/funding-notices/:fundingNoticeId/confirm-fund-transfer`)

**Other events:**
- Funding notice creation
- Status changes
- Actions taken
- Document uploads
- All platform events

---

## Token Tracking

### Creation Timestamp

**When tokens created:**
- Timestamp recorded
- Links to creation event
- Blockchain transaction time
- System timestamp
- Complete record

**What it shows:**
- Exact creation time
- Creation transaction
- Blockchain confirmation
- System record
- Audit trail entry

---

### Distribution Timestamp

**When tokens distributed:**
- Timestamp for each lender
- Individual distribution times
- Per-lender tracking
- Distribution transaction
- Complete record

**What it shows:**
- When each lender received tokens
- Distribution transaction
- Individual timing
- Per-lender audit trail

---

### Transfer Timestamp

**When tokens transferred:**
- Timestamp of transfer
- Transfer transaction
- Borrower approval time
- Transfer completion
- Complete record

**What it shows:**
- When transfer approved
- Transfer transaction
- Approval timing
- Completion record

---

## Viewing Token Information

### Where to See

**Token details show:**
- Token IDs
- Creation timestamps
- Distribution timestamps
- Transfer timestamps
- Blockchain references

**Access methods:**
- Funding notice details
- Token distribution section
- Blockchain explorer (if available)
- Audit trail
- Transaction history

---

## Blockchain Integration

### Blockchain Records

**What's on blockchain:**
- Token creation transaction
- Token IDs
- Ownership records
- Transfer transactions
- Complete history

**Benefits:**
- Immutable records
- Transparent tracking
- Verifiable transactions
- Complete audit trail
- Security

---

## Best Practices

1. **Track token IDs**: Note token IDs for reference
2. **Monitor timestamps**: Watch timing of events
3. **Verify blockchain**: Check blockchain records if available
4. **Maintain records**: Keep token information
5. **Use for audit**: Leverage for compliance

---

## Common Scenarios

### Scenario 1: Token Creation

1. Tokens created → Token IDs generated
2. Creation timestamp recorded → Exact time
3. Tokens distributed → Distribution timestamps
4. Borrower approves → Transfer timestamp
5. Complete tracking → All timestamps recorded

### Scenario 2: Token Transfer

1. Borrower approves transfer → Approval timestamp
2. Tokens transferred → Transfer timestamp
3. Lenders receive → Receipt timestamps
4. Complete audit trail → All events timestamped

---

## Key Takeaways

1. **Unique identifiers**: Token IDs enable tracking
2. **Complete timestamps**: All events timestamped
3. **Blockchain integration**: Immutable records
4. **Full audit trail**: Complete tracking
5. **Transparency**: Clear visibility of all events

Understanding token IDs and timestamps helps you track token creation, distribution, and transfers with complete auditability.
